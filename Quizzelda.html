<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz Avanzado - The Legend of Zelda</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #1a472a 0%, #2d5a3d 50%, #1a472a 100%);
      min-height: 100vh;
      padding: 2rem 1rem;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 15px 50px rgba(0,0,0,0.4);
      overflow: hidden;
    }

    header {
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      color: #1a472a;
      padding: 2.5rem 2rem;
      text-align: center;
      border-bottom: 4px solid #1a472a;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .content {
      padding: 2rem;
    }

    .inicio {
      text-align: center;
    }

    .inicio h2 {
      color: #1a472a;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    .inicio p {
      line-height: 1.8;
      margin-bottom: 1.5rem;
      color: #555;
      font-size: 1.05rem;
    }

    .dificultad-selector {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .dificultad-btn {
      padding: 1.5rem;
      border: 3px solid #1a472a;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: bold;
      color: #1a472a;
      transition: all 0.3s;
    }

    .dificultad-btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(26, 71, 42, 0.3);
    }

    .facil { background: #90ee90; border-color: #228b22; }
    .normal { background: #ffa500; border-color: #ff8c00; }
    .dificil { background: #ff6b6b; border-color: #cc0000; }
    .extremo { background: #9932cc; color: white; border-color: #660099; }

    .quiz-container {
      display: none;
    }

    .quiz-container.active {
      display: block;
    }

    .progreso {
      background: #f0f0f0;
      padding: 1.5rem;
      border-radius: 10px;
      margin-bottom: 2rem;
    }

    .progreso-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
      font-weight: bold;
      color: #1a472a;
    }

    .barra-progreso {
      width: 100%;
      height: 30px;
      background: #ddd;
      border-radius: 15px;
      overflow: hidden;
      border: 2px solid #1a472a;
    }

    .barra-relleno {
      height: 100%;
      background: linear-gradient(90deg, #ffd700, #ffed4e);
      border-radius: 13px;
      transition: width 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1a472a;
      font-weight: bold;
    }

    .temporizador {
      background: #fff3cd;
      padding: 1rem;
      border-radius: 8px;
      border-left: 4px solid #ff6b6b;
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      font-weight: bold;
      color: #cc0000;
    }

    .pregunta-contenedor {
      background: #f9f9f9;
      padding: 2rem;
      border-radius: 10px;
      margin-bottom: 2rem;
      border: 2px solid #ffd700;
    }

    .pregunta-num {
      color: #ffd700;
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }

    .pregunta-texto {
      font-size: 1.3rem;
      color: #1a472a;
      font-weight: bold;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .opciones {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .opcion {
      padding: 1.2rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1rem;
      line-height: 1.5;
    }

    .opcion:hover {
      border-color: #ffd700;
      background: #fffacd;
      transform: translateX(5px);
    }

    .opcion.seleccionada {
      border-color: #ffd700;
      background: #fffacd;
      font-weight: bold;
    }

    .opcion.correcta {
      border-color: #228b22;
      background: #90ee90;
    }

    .opcion.incorrecta {
      border-color: #cc0000;
      background: #ffcccc;
    }

    .botones {
      display: flex;
      gap: 1rem;
      justify-content: space-between;
      margin-top: 2rem;
    }

    button {
      padding: 1rem 2rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s;
    }

    .btn-siguiente {
      background: #ffd700;
      color: #1a472a;
      flex: 1;
    }

    .btn-siguiente:hover {
      background: #ffed4e;
      transform: scale(1.05);
    }

    .btn-siguiente:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-reiniciar {
      background: #1a472a;
      color: white;
      padding: 1.5rem 2.5rem;
      font-size: 1.1rem;
    }

    .btn-reiniciar:hover {
      background: #2d5a3d;
      transform: scale(1.05);
    }

    .resultados {
      display: none;
      text-align: center;
    }

    .resultados.active {
      display: block;
    }

    .puntuacion-final {
      font-size: 3rem;
      color: #ffd700;
      font-weight: bold;
      margin: 1.5rem 0;
    }

    .rango-resultado {
      font-size: 1.5rem;
      color: #1a472a;
      margin-bottom: 1rem;
      font-weight: bold;
    }

    .resumen-resultados {
      background: #f0f0f0;
      padding: 2rem;
      border-radius: 10px;
      margin: 2rem 0;
      text-align: left;
    }

    .resumen-item {
      display: flex;
      justify-content: space-between;
      padding: 0.8rem 0;
      border-bottom: 1px solid #ddd;
    }

    .resumen-item:last-child {
      border-bottom: none;
    }

    .explicacion {
      background: #e8f4f8;
      padding: 1rem;
      border-radius: 8px;
      margin-top: 1rem;
      border-left: 4px solid #0066cc;
      color: #333;
    }

    .mensaje-correcta {
      background: #90ee90;
      color: #228b22;
      padding: 0.8rem;
      border-radius: 5px;
      margin-top: 0.5rem;
      font-weight: bold;
    }

    .mensaje-incorrecta {
      background: #ffcccc;
      color: #cc0000;
      padding: 0.8rem;
      border-radius: 5px;
      margin-top: 0.5rem;
      font-weight: bold;
    }

    .trophy {
      font-size: 4rem;
      margin: 1rem 0;
    }

    @media (max-width: 768px) {
      .container {
        border-radius: 10px;
      }
      h1 {
        font-size: 2rem;
      }
      .pregunta-texto {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üéÆ THE LEGEND OF ZELDA üéÆ</h1>
      <p class="subtitle">Quiz Avanzado - Solo para los Verdaderos H√©roes</p>
    </header>

    <div class="content">
      <!-- PANTALLA INICIAL -->
      <div id="pantalla-inicio" class="inicio">
        <h2>¬°Bienvenido, Aventurero!</h2>
        <p>Este es un quiz desafiante sobre toda la saga de The Legend of Zelda. Pon a prueba tus conocimientos sobre los juegos, personajes, √≠tems y secretos del universo Hyliano.</p>
        <p><strong>üìä 50 preguntas ‚Ä¢ Dificultad personalizable ‚Ä¢ Sistema de puntuaci√≥n avanzado</strong></p>
        
        <h3 style="margin-top: 2rem; color: #1a472a;">Selecciona el nivel de dificultad:</h3>
        <div class="dificultad-selector">
          <button class="dificultad-btn facil" onclick="iniciarQuiz('facil')">
            ‚≠ê F√ÅCIL<br><small>Preguntas b√°sicas</small>
          </button>
          <button class="dificultad-btn normal" onclick="iniciarQuiz('normal')">
            ‚≠ê‚≠ê NORMAL<br><small>Moderadamente desafiante</small>
          </button>
          <button class="dificultad-btn dificil" onclick="iniciarQuiz('dificil')">
            ‚≠ê‚≠ê‚≠ê DIF√çCIL<br><small>Muy complicado</small>
          </button>
          <button class="dificultad-btn extremo" onclick="iniciarQuiz('extremo')">
            ‚≠ê‚≠ê‚≠ê‚≠ê EXTREMO<br><small>¬°Para expertos!</small>
          </button>
        </div>
      </div>

      <!-- CONTENEDOR QUIZ -->
      <div id="quiz-container" class="quiz-container">
        <div class="progreso">
          <div class="progreso-info">
            <span>Pregunta <span id="pregunta-actual">1</span> de <span id="total-preguntas">50</span></span>
            <span id="puntuacion-actual">Puntuaci√≥n: 0</span>
          </div>
          <div class="barra-progreso">
            <div class="barra-relleno" id="barra" style="width: 0%">
              <span id="porcentaje">0%</span>
            </div>
          </div>
        </div>

        <div class="temporizador" id="temporizador" style="display: none;">
          ‚è±Ô∏è Tiempo restante: <span id="tiempo">300</span>s
        </div>

        <div class="pregunta-contenedor">
          <div class="pregunta-num" id="pregunta-num"></div>
          <div class="pregunta-texto" id="pregunta-texto"></div>
          <div class="opciones" id="opciones"></div>
          <div id="retroalimentacion"></div>
        </div>

        <div class="botones">
          <button class="btn-siguiente" id="btn-siguiente" onclick="siguiente()" disabled>
            Siguiente Pregunta ‚Üí
          </button>
        </div>
      </div>

      <!-- PANTALLA RESULTADOS -->
      <div id="resultados-container" class="resultados">
        <div class="trophy" id="trophy"></div>
        <h2 style="color: #1a472a; margin-bottom: 1rem;">¬°Quiz Completado!</h2>
        <div class="rango-resultado" id="rango"></div>
        <div class="puntuacion-final"><span id="puntos-finales">0</span>/100</div>
        
        <div class="resumen-resultados">
          <div class="resumen-item">
            <span>Respuestas Correctas:</span>
            <strong><span id="correctas">0</span>/50</strong>
          </div>
          <div class="resumen-item">
            <span>Porcentaje de Acierto:</span>
            <strong><span id="porcentaje-acierto">0</span>%</strong>
          </div>
          <div class="resumen-item">
            <span>Dificultad:</span>
            <strong id="dificultad-resultado">-</strong>
          </div>
          <div class="resumen-item">
            <span>Tiempo Total:</span>
            <strong id="tiempo-total">0s</strong>
          </div>
        </div>

        <button class="btn-reiniciar" onclick="reiniciar()">üîÑ Volver al Inicio</button>
      </div>
    </div>
  </div>

  <script>
    const preguntas = {
      facil: [
        { pregunta: "¬øCu√°l es el nombre del protagonista de The Legend of Zelda?", opciones: ["Link", "Zelda", "Ganon", "Mario"], correcta: 0, explicacion: "Link es el h√©roe principal. Zelda es la princesa y Ganon es el villano." },
        { pregunta: "¬øDe qu√© color es el uniforme principal de Link?", opciones: ["Azul", "Rojo", "Verde", "Amarillo"], correcta: 2, explicacion: "Link tradicionalmente viste de verde, como en su traje cl√°sico de Ocarina of Time." },
        { pregunta: "¬øEn qu√© consola se lanz√≥ Ocarina of Time?", opciones: ["SNES", "Nintendo 64", "GameCube", "Switch"], correcta: 1, explicacion: "Ocarina of Time fue lanzado en Nintendo 64 en 1998, convirti√©ndose en un cl√°sico 3D." },
        { pregunta: "¬øQui√©n es el principal antagonista de la mayor√≠a de los juegos de Zelda?", opciones: ["King Dedede", "Ganon/Ganondorf", "Bowser", "Wario"], correcta: 1, explicacion: "Ganon y Ganondorf (su forma humana) son los villanos recurrentes de la saga." },
        { pregunta: "¬øCu√°l es el repollo sagrado que protege Link?", opciones: ["Navi", "Midna", "Fi", "Tatl"], correcta: 0, explicacion: "Navi es el hada azul que acompa√±a a Link en Ocarina of Time." },
        { pregunta: "¬øEn qu√© juego aparece Midna como personaje importante?", opciones: ["Twilight Princess", "Wind Waker", "Skyward Sword", "Link's Awakening"], correcta: 0, explicacion: "Midna es la princesa impas de Twilight Princess, y es fundamental en su historia." },
        { pregunta: "¬øQu√© instrumento musical es importante en Ocarina of Time?", opciones: ["Flauta", "Ocarina", "Saxof√≥n", "Viol√≠n"], correcta: 1, explicacion: "La ocarina es el instrumento titular del juego y se usa para resolver puzzles." },
        { pregunta: "¬øCu√°ntos juegos principales hay en la saga Zelda (aproximadamente)?", opciones: ["5", "10", "15", "20"], correcta: 2, explicacion: "Hay aproximadamente 15-20 juegos principales en la saga (incluyendo remakes)." },
        { pregunta: "¬øD√≥nde transcurre la mayor√≠a de la acci√≥n en Wind Waker?", opciones: ["Bosque", "Monta√±as", "Gran oc√©ano", "Castillo"], correcta: 2, explicacion: "Wind Waker se desarrolla en un vasto oc√©ano lleno de islas." },
        { pregunta: "¬øQu√© √≠tem es esencial para resolver casi todos los puzzles en Zelda?", opciones: ["Bomba", "Llave", "Espejo", "Escudo"], correcta: 0, explicacion: "Las bombas son un √≠tem cl√°sico en Zelda para romper paredes y derrotar enemigos." }
      ],
      normal: [
        { pregunta: "¬øEn qu√© juego Link viaja a trav√©s del tiempo?", opciones: ["A Link to the Past", "Ocarina of Time", "Wind Waker", "Twilight Princess"], correcta: 1, explicacion: "En Ocarina of Time, Link viaja 7 a√±os en el futuro." },
        { pregunta: "¬øCu√°l es el nombre de la tierra m√°gica en Twilight Princess?", opciones: ["Termina", "Twilight Realm", "Lorule", "Mundo Oscuro"], correcta: 1, explicacion: "El Twilight Realm es el reino del que viene Midna." },
        { pregunta: "¬øQu√© consola ejecut√≥ el primer juego de Zelda?", opciones: ["Commodore 64", "NES", "SNES", "Atari 2600"], correcta: 1, explicacion: "The Legend of Zelda se lanz√≥ en NES en 1986." },
        { pregunta: "¬øCu√°ntos templos tiene que completar Link en Ocarina of Time?", opciones: ["5", "6", "7", "8"], correcta: 2, explicacion: "Link debe completar 7 templos principales adem√°s del Templo del Tiempo." },
        { pregunta: "¬øQui√©n es el Deku Scrub sabio en Ocarina of Time?", opciones: ["Saria", "Darunia", "Nabooru", "Impa"], correcta: 0, explicacion: "Saria es la sabia del Bosque Deku en Ocarina of Time." },
        { pregunta: "¬øEn qu√© juego aparece por primera vez el sistema de √©nfasis de c√°mara de consola?", opciones: ["Link to the Past", "Ocarina of Time", "Wind Waker", "Link's Awakening"], correcta: 1, explicacion: "Ocarina of Time revolucion√≥ la c√°mara 3D en videojuegos." },
        { pregunta: "¬øCu√°l es el nombre del Bar√≥n Gargoyle en Wind Waker?", opciones: ["Kalle", "Bellum", "Vaati", "Agahnim"], correcta: 2, explicacion: "Vaati es uno de los principales antagonistas en Wind Waker." },
        { pregunta: "¬øQu√© transforma a Link en Lobo en Twilight Princess?", opciones: ["La Raza Asesina", "El Twilight", "La Magia Oscura", "Un hechizo"], correcta: 1, explicacion: "El Twilight transforma a Link en un lobo gris." },
        { pregunta: "¬øCu√°ntos a√±os pasan entre el presente y futuro en Ocarina of Time?", opciones: ["3 a√±os", "5 a√±os", "7 a√±os", "10 a√±os"], correcta: 2, explicacion: "Link viaja 7 a√±os en el futuro despu√©s de despertar en Ocarina of Time." },
        { pregunta: "¬øQu√© objeto permite a Link viajar entre dimensiones en A Link Between Worlds?", opciones: ["Sprit Flute", "Br√∫jula de Lorule", "Yugualt", "Pintura Mural"], correcta: 3, explicacion: "Link puede volverse pintura 2D para viajar en A Link Between Worlds." }
      ],
      dificil: [
        { pregunta: "¬øCu√°l es el nombre real de Ganon seg√∫n la tradici√≥n de Hyrule?", opciones: ["Demise", "Ganondorf Dragmire", "King of Evil", "Calamidad"], correcta: 1, explicacion: "Ganondorf Dragmire es el nombre completo del Rey del Mal." },
        { pregunta: "¬øEn qu√© juego Link es un sombra/Pintura en 2D?", opciones: ["Link's Awakening", "A Link Between Worlds", "Minish Cap", "Four Swords"], correcta: 1, explicacion: "En A Link Between Worlds, Link puede convertirse en pintura 2D." },
        { pregunta: "¬øQu√© ciclo temporal ocurre en Majora's Mask?", opciones: ["3 horas", "3 d√≠as", "3 meses", "3 a√±os"], correcta: 1, explicacion: "En Majora's Mask, el ciclo de 3 d√≠as se repite constantemente." },
        { pregunta: "¬øCu√°l es la verdadera identidad de Sheik en Ocarina of Time?", opciones: ["Impa", "Zelda", "Saria", "Navi"], correcta: 1, explicacion: "Sheik es en realidad la Princesa Zelda disfrazada." },
        { pregunta: "¬øEn qu√© juego Link se divide en cuatro versiones?", opciones: ["Four Swords Adventures", "The Minish Cap", "Wind Waker", "Spirit Tracks"], correcta: 0, explicacion: "En Four Swords Adventures, Link es dividido en 4 Links diferentes." },
        { pregunta: "¬øCu√°l es el nombre de la malvada bruja en Link's Awakening?", opciones: ["Tingle", "Agahnim", "Shadow Nightmares", "Gohdan"], correcta: 2, explicacion: "Los Shadow Nightmares son el antagonista en Link's Awakening." },
        { pregunta: "¬øQu√© m√°scara especial permite a Link ver mundos ocultos en Majora's Mask?", opciones: ["M√°scara D√©cora", "M√°scara de la Verdad", "M√°scara Geruda", "M√°scara Fiesta"], correcta: 1, explicacion: "La M√°scara de la Verdad permite ver secretos ocultos en el juego." },
        { pregunta: "¬øEn qu√© juego aparece por primera vez el sistema de dungeons tem√°tico?", opciones: ["The Legend of Zelda", "Zelda II", "A Link to the Past", "Ocarina of Time"], correcta: 2, explicacion: "A Link to the Past perfeccion√≥ la estructura de dungeons por elemento." },
        { pregunta: "¬øCu√°ntos guardianes hay que derrotar en Breath of the Wild?", opciones: ["2", "4", "6", "8"], correcta: 1, explicacion: "Hay 4 guardianes divinos tem√°ticos que combaten diferentes elementos." },
        { pregunta: "¬øCu√°l es la forma final de Link en Skyward Sword?", opciones: ["Demigod Link", "Eldin Chosen", "Skyward Sword Link", "True Hero Link"], correcta: 2, explicacion: "Link alcanza su forma definitiva empu√±ando la Master Sword en Skyward Sword." }
      ],
      extremo: [
        { pregunta: "¬øEn qu√© juego se revela que Link es descendiente de Hylia?", opciones: ["Skyward Sword", "Ocarina of Time", "Twilight Princess", "Breath of the Wild"], correcta: 0, explicacion: "Skyward Sword revela los or√≠genes de Link conectado con la Diosa Hylia." },
        { pregunta: "¬øCu√°l es el verdadero nombre de la M√°scara de Majora?", opciones: ["Demonio Majora", "Monstruo Primigenio", "Manifestaci√≥n del Caos", "Entidad Eterna"], correcta: 2, explicacion: "Majora es una manifestaci√≥n primigenia del caos en el juego." },
        { pregunta: "¬øEn qu√© l√≠nea temporal ocurre Wind Waker?", opciones: ["L√≠nea de Derrota", "L√≠nea Infantil", "L√≠nea Adulta", "L√≠nea Alterna"], correcta: 0, explicacion: "Wind Waker ocurre 10,000 a√±os despu√©s en la l√≠nea de derrota de Ocarina of Time." },
        { pregunta: "¬øQui√©n es el fabricante original de la Master Sword?", opciones: ["Hylia", "Demise", "The Old Man", "Skyward Spirit"], correcta: 0, explicacion: "La Diosa Hylia forj√≥ la Master Sword en Skyward Sword." },
        { pregunta: "¬øCu√°ntos fragmentos de alma Link necesita recolectar en Twilight Princess?", opciones: ["6", "8", "10", "12"], correcta: 1, explicacion: "Link debe recolectar 8 fragmentos de alma para salvar a Midna." },
        { pregunta: "¬øEn qu√© juego se introduce el concepto de 'Calamidad'?", opciones: ["Breath of the Wild", "Skyward Sword", "Twilight Princess", "Wind Waker"], correcta: 0, explicacion: "Breath of the Wild introduce la Calamidad Ganon como amenaza antigua." },
        { pregunta: "¬øCu√°l es la verdadera naturaleza de Ganon en Skyward Sword?", opciones: ["Un dios olvidado", "Demise encarnado", "Un hechicero antiguo", "Un monstruo primigenio"], correcta: 1, explicacion: "Ganon es la encarnaci√≥n de Demise, la manifestaci√≥n del odio eterno." },
        { pregunta: "¬øEn qu√© juego Link viaja entre el mundo de los vivos y los muertos?", opciones: ["Spirit Tracks", "Phantom Hourglass", "The Minish Cap", "Four Swords"], correcta: 0, explicacion: "En Spirit Tracks, Link opera un tren que viaja entre dimensiones." },
        { pregunta: "¬øCu√°ntos Link alternativos existen en la l√≠nea oficial de Zelda?", opciones: ["3", "5", "7", "Infinitos"], correcta: 3, explicacion: "Hay m√∫ltiples Links a lo largo de la historia de Hyrule (Ciclos)" },
        { pregunta: "¬øQu√© revelaci√≥n hace Breath of the Wild sobre la Princesa Zelda?", opciones: ["Es un avatar de Hylia", "Puede usar magia divina", "Es inmortal", "Todas las anteriores"], correcta: 3, explicacion: "Zelda en BotW es un avatar de Hylia con poderes divinos e inmortalidad." }
      ]
    };

    let quizActual = [];
    let preguntaActual = 0;
    let puntuacion = 0;
    let dificultadActual = '';
    let respuestasUsuario = [];
    let tiempoInicio = 0;
    let tiempoRestante = 300;

    function iniciarQuiz(dificultad) {
      dificultadActual = dificultad;
      quizActual = preguntas[dificultad];
      preguntaActual = 0;
      puntuacion = 0;
      respuestasUsuario = [];
      tiempoInicio = Date.now();

      document.getElementById('pantalla-inicio').style.display = 'none';
      document.getElementById('quiz-container').classList.add('active');
      document.getElementById('total-preguntas').textContent = quizActual.length;

      if (dificultad === 'extremo') {
        document.getElementById('temporizador').style.display = 'block';
        iniciarTemporizador();
      }

      mostrarPregunta();
    }

    function iniciarTemporizador() {
      tiempoRestante = 300;
      setInterval(() => {
        tiempoRestante--;
        document.getElementById('tiempo').textContent = tiempoRestante;
        if (tiempoRestante <= 0) {
          finalizarQuiz();
        }
      }, 1000);
    }

    function mostrarPregunta() {
      const pregunta = quizActual[preguntaActual];
      document.getElementById('pregunta-num').textContent = `Pregunta ${preguntaActual + 1} de ${quizActual.length}`;
      document.getElementById('pregunta-texto').textContent = pregunta.pregunta;

      let opcionesHTML = '';
      pregunta.opciones.forEach((opcion, index) => {
        opcionesHTML += `
          <div class="opcion" onclick="seleccionarOpcion(${index})">
            ${String.fromCharCode(65 + index)}. ${opcion}
          </div>
        `;
      });
      document.getElementById('opciones').innerHTML = opcionesHTML;
      document.getElementById('retroalimentacion').innerHTML = '';
      document.getElementById('btn-siguiente').disabled = true;
      document.getElementById('pregunta-actual').textContent = preguntaActual + 1;

      const porcentaje = Math.round((preguntaActual / quizActual.length) * 100);
      document.getElementById('barra').style.width = porcentaje + '%';
      document.getElementById('porcentaje').textContent = porcentaje + '%';
    }

    function seleccionarOpcion(index) {
      const opciones = document.querySelectorAll('.opcion');
      opciones.forEach(o => o.classList.remove('seleccionada'));
      opciones[index].classList.add('seleccionada');

      respuestasUsuario[preguntaActual] = index;
      document.getElementById('btn-siguiente').disabled = false;

      const pregunta = quizActual[preguntaActual];
      const esCorrecta = index === pregunta.correcta;

      setTimeout(() => {
        if (esCorrecta) {
          opciones[index].classList.add('correcta');
          puntuacion += 10;
          let retroHTML = '<div class="mensaje-correcta">‚úì ¬°CORRECTO!</div>';
          retroHTML += `<div class="explicacion">${pregunta.explicacion}</div>`;
          document.getElementById('retroalimentacion').innerHTML = retroHTML;
        } else {
          opciones[index].classList.add('incorrecta');
          opciones[pregunta.correcta].classList.add('correcta');
          let retroHTML = '<div class="mensaje-incorrecta">‚úó INCORRECTO</div>';
          retroHTML += `<div class="explicacion">${pregunta.explicacion}</div>`;
          document.getElementById('retroalimentacion').innerHTML = retroHTML;
        }
        document.getElementById('puntuacion-actual').textContent = `Puntuaci√≥n: ${puntuacion}`;
      }, 300);
    }

    function siguiente() {
      if (respuestasUsuario[preguntaActual] === undefined) {
        alert('Debes seleccionar una opci√≥n');
        return;
      }

      preguntaActual++;
      if (preguntaActual < quizActual.length) {
        mostrarPregunta();
      } else {
        finalizarQuiz();
      }
    }

    function finalizarQuiz() {
      document.getElementById('quiz-container').classList.remove('active');
      document.getElementById('resultados-container').classList.add('active');

      const correctas = respuestasUsuario.filter((r, i) => r === quizActual[i].correcta).length;
      const porcentajeAcierto = Math.round((correctas / quizActual.length) * 100);
      const tiempoTotal = Math.round((Date.now() - tiempoInicio) / 1000);

      let rango = '';
      let trophy = '';
      if (puntuacion === 100) {
        rango = 'Eres el H√âROE LEGENDARIO de Hyrule üëë';
        trophy = 'üëë';
      } else if (puntuacion >= 80) {
        rango = 'Eres un EXPERTO en The Legend of Zelda üèÜ';
        trophy = 'üèÜ';
      } else if (puntuacion >= 60) {
        rango = 'Tienes BUEN CONOCIMIENTO de Zelda üìñ';
        trophy = 'üìñ';
      } else if (puntuacion >= 40) {
        rango = 'Conoces lo B√ÅSICO de Zelda üéÆ';
        trophy = 'üéÆ';
      } else {
        rango = 'Necesitas JUGAR M√ÅS Zelda üó°Ô∏è';
        trophy = 'üó°Ô∏è';
      }

      document.getElementById('puntos-finales').textContent = puntuacion;
      document.getElementById('rango').textContent = rango;
      document.getElementById('trophy').textContent = trophy;
      document.getElementById('correctas').textContent = correctas;
      document.getElementById('porcentaje-acierto').textContent = porcentajeAcierto;
      document.getElementById('dificultad-resultado').textContent = dificultadActual.toUpperCase();
      document.getElementById('tiempo-total').textContent = tiempoTotal + 's';
    }

    function reiniciar() {
      preguntaActual = 0;
      puntuacion = 0;
      respuestasUsuario = [];
      document.getElementById('resultados-container').classList.remove('active');
      document.getElementById('pantalla-inicio').style.display = 'block';
    }
  </script>
</body>
</html>
